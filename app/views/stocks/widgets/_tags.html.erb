<div class="mb-3">
  <h4 class="uppercase mb-3 font-normal">Related Tags</h4>

  <% [:company_tag, :dividend_tag, :safe_dividend_tag, :dividend_growth_tag].each do |key| %>
    <% @stock.tags.by_key(key).each do |tag| %>
      <%= link_to tag.name, url_for({controller: 'stocks', action: 'index', tag: tag.name}), class: 'text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 bg-blue-200 text-blue-700 rounded-full mb-1' %>
    <% end %>
  <% end %><br>

  <% VirtualTag.all.select { |tag| tag.eligible?(@position) }.each do |tag| %>
    <%= link_to url_for({ controller: 'stocks', action: 'index', tag: tag.name }), class: 'text-xs inline-flex items-center font-bold leading-sm uppercase pl-2 pr-3 py-1 bg-blue-200 text-blue-700 rounded-full mb-1' do %>
      <%= inline_svg(tag.svg_image, size: '16*16', class: 'mr-1') %> <%= tag.name %>
    <% end %>
  <% end %><br>

  <% peers = stock_peers %>
  <% if peers.present? %>
    <% peers.each do |stock_peer| %>
      <% if stock_peer[:stock] %>
        <%= link_to stock_peer[:symbol], stock_path(stock_peer[:stock].symbol), class: 'text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 bg-blue-200 text-blue-700 rounded-full mb-1' %>
      <% else %>
        <span class="text-xs inline-flex items-center font-bold leading-sm uppercase px-3 py-1 bg-gray-200 text-gray-700 rounded-full mb-1"><%= stock_peer[:symbol] %></span>
      <% end %>
    <% end %>
  <% end %>
</div>
