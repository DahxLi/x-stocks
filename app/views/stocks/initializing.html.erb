<div class="w-full max-w-md mx-auto bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"
     data-controller="service"
     data-action="turbo:load@window->service#run"
     data-service-output-container-value="output-container"
     data-service-output-progress-value="output-progress"
     data-service-output-message-value="output-message"
     data-service-redirect-value="<%= params[:save_and_show] ? stock_path(@stock.symbol, save_and_show: true) : new_stock_path %>">
  <h2 class="text-2xl uppercase mb-6"><%= @page_title %></h2>

  <%= form_for @stock, url: processing_stock_path(@stock), data: { service_target: 'form' } do |form| %>
    <div class="mb-4">
      <%= form.label :symbol, class: 'block text-gray-700 font-bold mb-2' %>
      <%= form.text_field :symbol, disabled: true, class: 'shadow-sm appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline uppercase bg-gray-200' %>
    </div>

    <div class="pb-3 flex items-center justify-between">
      <%= link_to back_url do %>
        <%= inline_svg('svg/arrow-left.svg', size: '24*24', class: 'inline-block') %> Back
      <% end %>
      <button class="btn btn-primary" disabled="disabled" name="save_and_show">Save & Show</button>
      <button class="btn btn-secondary" disabled="disabled" name="save_only">Save</button>
    </div>
  <% end %>
</div>

<%= render partial: 'shared/service_runner', locals: { class: 'max-w-md', can_stop: false } %>
